<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
	<style> canvas {position:fixed; width: 100%; height: 100%;} </style>
</head>
<body>
	<canvas id="canvas" width="800" height="400"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		//Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.


		let leftPlayerDown=false;
		let leftPlayerUp=false;
		let rightPlayerDown=false;
		let rightPlayerUp=false;
		let paused= false;
		let started=false;


		app.onInit = function(){
			this.canvas=document.getElementById("canvas");

			
			this.nodes.push({
				id:"left-player",
				x: (this.canvas.width / 8),
				y: (this.canvas.height / 2) - 35,
				width: canvas.width * 0.01,
				height: canvas.height * 0.2,
				color: "green",
			});

			this.nodes.push({
				id: "right-player",
				x: this.canvas.width - (this.canvas.width / 8),
				y: (this.canvas.height / 2) - 35,
				width: canvas.width * 0.01,
				height: canvas.height * 0.2,
				color: "green",
			});
			this.nodes.push({
				id: "ball",
				x: canvas.width / 2,
				y: canvas.height / 2,
				width: this.getNode("left-player").width,
				height: this.getNode("left-player").width,
				color: "green",
				velX: 5,
				velY: 5,
				speed: 5,
				// xDirSpeed: Math.random()<0.5?(Math.floor(Math.random()* 3)+1) : -(Math.floor(Math.random()*3)+1),
				// yDirSpeed: Math.random()<0.5?(Math.floor(Math.random()* 3)+1) : -(Math.floor(Math.random()*3)+1)

			});

			function restart(){
				ball.x = canvas.width
			}



			//moving paddles with keys SHOULD REMOVE OR STATEMENTS
			document.addEventListener("keydown", (e) => {
				if(e.keyCode==87){
					leftPlayerUp=true;
					leftPlayerDown=false;
				}if(e.keyCode==83){
					leftPlayerUp=false;
					leftPlayerDown=true;
				}if(e.keyCode==38){
					rightPlayerUp=true;
					rightPlayerDown=false;
				}if(e.keyCode==40){
					rightPlayerUp=false;
					rightPlayerDown=true;
				}
        });

		document.addEventListener("keydown", (e) => {
				if(e.keyCode==87){
					this.getNode("left-player").y -= 10;
				
				}if(e.keyCode==83){
					this.getNode("left-player").y += 10;

				}if(e.keyCode==38){
					this.getNode("right-player").y -= 10;

				}if(e.keyCode==40){
					this.getNode("right-player").y += 10;

				}
        });

        document.addEventListener("keyup", (e) => {
			leftPlayerUp=false;
			leftPlayerDown=false;
			rightPlayerUp=false;
			rightPlayerDown=false;
        });



		
		};

		app.onUpdate = function(time){
			this.getNode('black-box').y++;

			if(Math.cos(this.timestamp / 100) > 0){
				this.getNode('red-box').direction = -1;
			}else{
				this.getNode('red-box').direction = 1;
			}

			this.getNode('red-box').x+=this.getNode('red-box').direction;
		};
	</script>
</body>
</html>